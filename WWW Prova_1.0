using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System.IO;
using System.Net.Http;
using System.Threading.Tasks;
using System.Drawing;
using static UnityEngine.Shader;

public class MJPEGconWWW : MonoBehaviour
{
    public GameObject imageQuad;
  
    void loop()
    {
        StartCoroutine(ChiamataWWW());
        System.Threading.Thread.Sleep(100);
    }
    public Material MaterialWithTexture(Texture2D texture)
    {
        Material material = new Material(Shader.Find("Standard"));
        material.mainTexture = texture;
        return material;
    }
    IEnumerator ChiamataWWW()
    {
        // Carica un'immagine da internet
        WWW www = new WWW("https://picsum.photos/200");

        // Attendi che l'immagine venga caricata
        yield return www;

        // Controlla se il caricamento Ã¨ stato completato con successo
        if (www.isDone)
        {
            // Ottieni la texture dell'immagine
            Texture2D texture = www.texture;
            //applica al quad il materiale con la texture
            MeshRenderer quadRenderer = imageQuad.GetComponent<MeshRenderer>();
            quadRenderer.material = MaterialWithTexture(texture);
        }
        else
        {
            // Stampa un messaggio di errore
            Debug.LogError("Errore durante il caricamento dell'immagine: " + www.error);
        }
       
        
    }
    
}




   

  
    


